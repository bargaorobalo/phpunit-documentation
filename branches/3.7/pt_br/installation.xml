<?xml version="1.0" encoding="utf-8" ?>

<chapter id="installation">
  <title>Instalando o PHPUnit</title>

  <para>
    O PHPUnit pode ser instalado usando o instalador PEAR, a espinha dorsal do
    <ulink url="http://pear.php.net/">Repositório de Extensões e Aplicações PHP</ulink>, sistema de distribuição e promoção 
    de projetos em PHP.
  </para>

  <caution>
    <para>
      Dependendo do seu sistema operacionao e/ou sua versão do PHP, você 
      precisará instalar o PEAR ou atualizar a versão que você tem instalada
      antes que você continuar com as instruções contidas neste capítulo.
    </para>

    <para>
      O comando <userinput>sudo pear upgrade PEAR</userinput> é usualmente suficiente
      para atualizar uma instalação existente do PEAR. O <ulink
      url="http://pear.php.net/manual/en/installation.getting.php">Manual do PEAR</ulink>
      explica como realizar uma nova instalação do PEAR.
    </para>
  </caution>

  <note>
    <para>
      O PHPUnit 3.7 requer a versão 5.3.3 (ou posterior) do PHP, mas a versão 5.4.0
      (ou posterior) do PHP é altamente recomendada.
    </para>

    <para>
      A biblioteca PHP_CodeCoverage é utilziada pelo PHPUnit para recuperar e processar 
      as informações do código, ela depende do XDebug versão 2.0.5 ou posterior, porém recomenda-se
      a utilização da versão 2.2 do XDebug.
    </para>
  </note>

  <para>
    Os dois comandos seguintes (que deverá ser executado como <literal>root</literal>) 
    é tudo que você precisa para instalar o PHPUnit usando o instalador PEAR:
  </para>

  <screen><userinput>pear config-set auto_discover 1</userinput>
<userinput>pear install pear.phpunit.de/PHPUnit</userinput></screen>

  <para>
   Os seguintes pacotes opcionais estão disponíveis:
  </para>

  <variablelist>
    <varlistentry>
      <term><literal>DbUnit</literal></term>
      <listitem>
        <para>
          O DbUnit é porta para o PHP/PHPUnit suportar testes com interação com banco de dados.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/DbUnit</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_Selenium</literal></term>
      <listitem>
        <para>
          Integração do Selenium RC com o PHPUnit.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_Selenium</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_Story</literal></term>
      <listitem>
        <para>
          Corretor de testes baseado em histórias para Behavior-Driven Development(BDD) com PHPUnit.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_Story</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_SkeletonGenerator</literal></term>
      <listitem>
        <para>
          Ferramenta para gerar esqueleto de classes de testes baseado no fonte de uma classe
          em produção e vice-versa.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_SkeletonGenerator</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_TestListener_DBUS</literal></term>
      <listitem>
        <para>
          Um TestListener que envia eventos para o DBUS.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_TestListener_DBUS</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_TestListener_XHProf</literal></term>
      <listitem>
        <para>
          Um TestListener que usa XHProf para perfis automatizados para os códigos testados.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_TestListener_XHProf</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_TicketListener_Fogbugz</literal></term>
      <listitem>
        <para>
          Um autidor de tickets que interage com a API do Fogbugz.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_TicketListener_Fogbugz</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_TicketListener_GitHub</literal></term>
      <listitem>
        <para>
          Um auditor de tickets que interagem com a API do GitHub.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_TicketListener_GitHub</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_TicketListener_GoogleCode</literal></term>
      <listitem>
        <para>
          Um auditor de tickets que interagem com a API do Google Code.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_TicketListener_GoogleCode</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHPUnit_TicketListener_Trac</literal></term>
      <listitem>
        <para>
          Um auditor de tickets que interagem com a API do Trac.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHPUnit_TicketListener_Trac</userinput></screen>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>PHP_Invoker</literal></term>
      <listitem>
        <para>
          Uma classe utilitária para fazer chamadas de timeout. Este pacote é
          obrigatório para reforçar testes de timeout em modo restrito.
        </para>

        <para>
          Este pacote pode ser instalado usando o comando:
        </para>

        <screen><userinput>pear install phpunit/PHP_Invoker</userinput></screen>
      </listitem>
    </varlistentry>
  </variablelist>

  <para>
    Antes da instalação você pode procurar os arquivos fontes do PHPUnit dentro
    do seu diretório local do PEAR. Este diretório é, usualmente, <filename>/usr/lib/php/PHPUnit</filename>.
    <filename>/usr/lib/php/PHPUnit</filename>.
  </para>
</chapter>
